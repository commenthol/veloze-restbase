
# REST Router 

All collections / tables require a JSON schema for storing documents.

Only flat objects can be stored and queries (for compatibility with relational
databases).

To uniquely identify a document an `id` is created when the record is created.

Here also a `createdAt` timestamp is added. Together with this the `updatedAt`
timestamp is created which then will used to perform optimistic locking on that 
document.

```json
{
  "id": string,       // unique id for record
  "createdAt": Date,  // created timestamp (set on POST /)
  "updatedAt": Date,  // updated timestamp (is set on every PUT /:id or PATCH /:id)
}
```

## POST / 

Create new document in database.

Provide the data according to the JSON schema

`id` is autogenerated together with `createdAt` and `updatedAt` timestamp.

**Returns:**

- 201 Created

  Returns the created document

- 400 Bad Request

  Reasons: Empty document, schema validation error

## PUT /:id 

Update a document.

`updatedAt` timestamp is set to current date-time.

- 200 OK

  Returns the updated document

- 400 Bad Request

  Reasons: Empty document, schema validation error

- 404 Not Found

  Reasons: Document with `id` not found

## DELETE /:id

Delete a document with `id`.

TODO: